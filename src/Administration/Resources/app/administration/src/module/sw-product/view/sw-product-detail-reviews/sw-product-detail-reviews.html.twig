<div class="sw-product-detail-reviews">
    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
    {% block sw_product_detail_reviews %}
    <div v-if="isLoading">
        <sw-skeleton />
        <sw-skeleton />
    </div>

    <sw-card
        v-if="!isLoading"
        class="sw-product-detail-reviews__list"
        position-identifier="sw-product-detail-reviews"
        :title="cardTitle"
    >
        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
        {% block sw_product_detail_reviews_data %}
        <template
            v-if="total"
            #grid
        >
            <sw-data-grid
                ref="gridReview"
                :data-source="dataSource"
                :columns="reviewColumns"
                :is-loading="isLoading"
                :show-selection="false"
                :show-actions="true"
            >
                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                {% block sw_product_detail_reviews_data_stars %}
                <template #column-points="{ item }">
                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                    {% block sw_product_detail_reviews_data_stars_content %}

                    <sw-rating-stars v-model="item.points" />

                    {# @deprecated tag:v6.6.0 - Block will removed because it will be replaced by `sw-rating-stars` component. Use upper block `sw_product_detail_reviews_data_stars_content` instead.  #}
                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                    {% block sw_product_detail_reviews_data_stars_filled %}{% endblock %}

                    {# @deprecated tag:v6.6.0 - Block will removed because it will be replaced by `sw-rating-stars` component. Use upper block `sw_product_detail_reviews_data_stars_content` instead.  #}
                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                    {% block sw_product_detail_reviews_data_stars_empty %}{% endblock %}

                    {% endblock %}
                </template>
                {% endblock %}

                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                {% block sw_product_detail_reviews_data_status %}
                <template #column-status="{ item }">
                    <sw-data-grid-column-boolean
                        v-model="item.status"
                        :is-inline-edit="false"
                    />
                </template>
                {% endblock %}

                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                {% block sw_product_detail_reviews_data_created_at %}
                <template #column-createdAt="{ item }">
                    {{ item.createdAt | date({ hour: '2-digit', minute: '2-digit', second: '2-digit' }) }}
                </template>
                {% endblock %}

                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                {% block sw_product_detail_reviews_data_action %}
                <template #actions="{ item }">
                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                    {% block sw_product_detail_reviews_data_action_edit %}
                    <sw-context-menu-item
                        class="sw-product-detail-reviews__action-edit"
                        :disabled="!acl.can('product.editor')"
                        :router-link="{ name: 'sw.review.detail', params: { id: item.id } }"
                    >
                        {{ $tc('sw-product.reviewForm.contextMenuEdit') }}
                    </sw-context-menu-item>
                    {% endblock %}

                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                    {% block sw_product_detail_reviews_data_action_delete %}
                    <sw-context-menu-item
                        class="sw-product-detail-reviews__action-delete"
                        variant="danger"
                        :disabled="!acl.can('product.editor')"
                        @click="onStartReviewDelete(item)"
                    >
                        {{ $tc('sw-product.reviewForm.contextMenuDelete') }}
                    </sw-context-menu-item>
                    {% endblock %}
                </template>
                {% endblock %}

                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                {% block sw_product_detail_reviews_data_pagination %}
                <template #pagination>
                    <sw-pagination
                        :total="total"
                        :limit="limit"
                        :page="page"
                        :total-visible="7"
                        :steps="[10]"
                        @page-change="onChangePage"
                    />
                </template>
                {% endblock %}
            </sw-data-grid>
        </template>
        {% endblock %}

        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
        {% block sw_product_detail_reviews_empty_state %}

        <sw-empty-state
            v-if="!total"
            :title="$tc('sw-product.reviewForm.messageEmptyTitle')"
            :subline="$tc('sw-product.reviewForm.messageEmptySubline')"
            :absolute="false"
            empty-module
        >
            <template #icon>
                <img
                    :src="'/administration/static/img/empty-states/products-empty-state.svg' | asset"
                    :alt="$tc('sw-product.reviewForm.messageEmptyTitle')"
                >
            </template>

            <template #actions>
                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                {% block sw_product_detail_reviews_empty_state_button %}
                <sw-button
                    variant="ghost"
                    :router-link="{ name: 'sw.review.index' }"
                >
                    {{ $tc('sw-product.reviewForm.emptyStateButton') }}
                </sw-button>
                {% endblock %}
            </template>
        </sw-empty-state>
        {% endblock %}

        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
        {% block sw_product_detail_reviews_modal_delete %}
        <sw-modal
            v-if="showReviewDeleteModal"
            variant="small"
            :title="$tc('sw-product.reviewForm.modal.confirmTitle')"
            @modal-close="onCancelReviewDelete"
        >
            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
            {% block sw_product_detail_reviews_modal_delete_body %}
            <p>{{ $tc('sw-product.reviewForm.modal.confirmText') }}</p>
            {% endblock %}

            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
            {% block sw_product_detail_reviews_modal_delete_footer %}
            <template #modal-footer>
                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                {% block sw_product_detail_reviews_modal_delete_button_cancel %}
                <sw-button
                    size="small"
                    @click="onCancelReviewDelete"
                >
                    {{ $tc('sw-product.reviewForm.modal.buttonCancel') }}
                </sw-button>
                {% endblock %}

                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->
                {% block sw_product_detail_reviews_modal_delete_button_confirm %}
                <sw-button
                    size="small"
                    variant="danger"
                    @click="onConfirmReviewDelete"
                >
                    {{ $tc('sw-product.reviewForm.modal.buttonDelete') }}
                </sw-button>
                {% endblock %}
            </template>
            {% endblock %}
        </sw-modal>
        {% endblock %}
    </sw-card>
    {% endblock %}
</div>
